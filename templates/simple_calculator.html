{% extends 'base.html' %}

{% block title %}Free Online Calculator - Easy Scientific Calculator with Memory Functions{% endblock %}
{% block description %}Free online calculator with basic arithmetic, scientific functions, and memory capabilities. Easy to use with calculation history and mobile support.{% endblock %}
{% block keywords %}free calculator, online calculator, scientific calculator, calculator with memory, easy calculator, math tool, web calculator{% endblock %}

{% block hero_color %}#004f1e{% endblock %}
{% block hero_title %}Free Online Calculator{% endblock %}
{% block hero_subtitle %}Powerful yet easy-to-use calculator with scientific functions, memory capabilities, and calculation history!{% endblock %}

{% block button_gradient_start %}#004f1e{% endblock %}
{% block button_gradient_end %}#00703a{% endblock %}
{% block button_shadow_color %}rgba(0,79,30,0.3){% endblock %}
{% block button_shadow_hover_color %}rgba(0,79,30,0.4){% endblock %}

{% block step_title_color %}#00703a{% endblock %}
{% block step_number_bg_color %}#00703a{% endblock %}
{% block feature_title_color %}#00703a{% endblock %}
{% block faq_title_color %}#00703a{% endblock %}
{% block support_title_color %}#00703a{% endblock %}

{% block additional_styles %}
.calculator-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 24px;
    background: #23263a;
    padding: 28px 16px 24px 16px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-width: 700px;
    margin: 0 auto;
}
.calculator-main {
    flex: 1 1 320px;
    min-width: 280px;
    max-width: 340px;
}
.calculator-display {
    width: 100%;
    margin-bottom: 18px;
    background: #181a20;
    color: #ffe066;
    border: 2px solid #004f1e;
    font-size: 1.5em;
    border-radius: 6px;
    padding: 10px;
    text-align: right;
}
.calculator-buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}
.calculator-buttons button {
    font-size: 1.13em;
    font-weight: bold;
    padding: 12px 0;
    background: linear-gradient(90deg, #004f1e 0%, #00703a 100%);
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
}
.calculator-buttons button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,79,30,0.3);
}
.calculator-history {
    flex: 1 1 180px;
    min-width: 160px;
    background: #181a20;
    color: #ffe066;
    border-radius: 8px;
    padding: 16px;
    margin-top: 0;
    max-height: 340px;
    overflow-y: auto;
    border: 1px solid #004f1e;
}
.calculator-history h3 {
    margin-top: 0;
    font-size: 1.1em;
    margin-bottom: 10px;
    color: #00703a;
}
.calculator-history ul {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 1em;
}
.calculator-history li {
    margin-bottom: 8px;
    word-break: break-all;
    padding: 5px;
    border-bottom: 1px solid #333;
}
@media (max-width: 700px) {
    .calculator-container {
        flex-direction: column;
        align-items: stretch;
        padding: 12px 4px;
    }
    .calculator-main, .calculator-history {
        max-width: 100%;
        min-width: 0;
    }
    .calculator-history {
        margin-top: 18px;
    }
}
{% endblock %}

{% block content %}
<div class="input-section">
    <div class="calculator-container">
        <div class="calculator-main">
            <input type="text" id="display" class="calculator-display" disabled placeholder="0">
            <div class="calculator-buttons">
                <!-- Memory row -->
                <button onclick="memoryClear()">MC</button>
                <button onclick="memoryRecall()">MR</button>
                <button onclick="memoryAdd()">M+</button>
                <button onclick="memorySubtract()">M-</button>
                <!-- Scientific row -->
                <button onclick="appendToDisplay('Math.sqrt(')">√</button>
                <button onclick="appendToDisplay('Math.sin(')">sin</button>
                <button onclick="appendToDisplay('Math.cos(')">cos</button>
                <button onclick="appendToDisplay('Math.tan(')">tan</button>
                <!-- Standard row -->
                <button onclick="clearDisplay()">AC</button>
                <button onclick="appendToDisplay('%')">%</button>
                <button onclick="appendToDisplay('/')">÷</button>
                <button onclick="backspace()">←</button>
                <button onclick="appendToDisplay('7')">7</button>
                <button onclick="appendToDisplay('8')">8</button>
                <button onclick="appendToDisplay('9')">9</button>
                <button onclick="appendToDisplay('*')">×</button>
                <button onclick="appendToDisplay('4')">4</button>
                <button onclick="appendToDisplay('5')">5</button>
                <button onclick="appendToDisplay('6')">6</button>
                <button onclick="appendToDisplay('-')">−</button>
                <button onclick="appendToDisplay('1')">1</button>
                <button onclick="appendToDisplay('2')">2</button>
                <button onclick="appendToDisplay('3')">3</button>
                <button onclick="appendToDisplay('+')">+</button>
                <button onclick="appendToDisplay('0')">0</button>
                <button onclick="appendToDisplay('.')">.</button>
                <button onclick="toggleSign()">±</button>
                <button onclick="calculate()">=</button>
            </div>
        </div>
        <div class="calculator-history">
            <h3>History</h3>
            <ul id="history-list"></ul>
        </div>
    </div>
</div>

<div class="how-to" style="max-width: 900px; margin: 60px auto 40px;">
    <h2 style="text-align: center; margin-bottom: 30px; color: #fff;">How to Use Our Free Online Calculator</h2>
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 16px; margin-top: 28px;">
        <div style="flex: 1 1 220px; max-width: 260px; min-width: 200px; margin: 0; background: #23263a; color: #fff; padding: 20px 15px; border-radius: 12px; box-sizing: border-box; position: relative;">
            <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; line-height: 40px; background-color: #004f1e; color: white; border-radius: 50%; font-size: 1.3em; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">1</div>
            <h3 style="color:#fff; margin-top: 20px; text-align: center; font-size: 1.2em;">Enter Numbers</h3>
            <p style="text-align:center; color:#e0e0e0; font-size:0.95em;">Click the number buttons to input values. You can also use your keyboard for faster input if you're on a desktop or laptop.</p>
        </div>
        <div style="flex: 1 1 220px; max-width: 260px; min-width: 200px; margin: 0; background: #23263a; color: #fff; padding: 20px 15px; border-radius: 12px; box-sizing: border-box; position: relative;">
            <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; line-height: 40px; background-color: #004f1e; color: white; border-radius: 50%; font-size: 1.3em; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">2</div>
            <h3 style="color:#fff; margin-top: 20px; text-align: center; font-size: 1.2em;">Choose Operation</h3>
            <p style="text-align:center; color:#e0e0e0; font-size:0.95em;">Select an operation (+, -, ×, ÷) or use advanced functions like square root, sine, cosine, or tangent for scientific calculations.</p>
        </div>
        <div style="flex: 1 1 220px; max-width: 260px; min-width: 200px; margin: 0; background: #23263a; color: #fff; padding: 20px 15px; border-radius: 12px; box-sizing: border-box; position: relative;">
            <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; line-height: 40px; background-color: #004f1e; color: white; border-radius: 50%; font-size: 1.3em; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">3</div>
            <h3 style="color:#fff; margin-top: 20px; text-align: center; font-size: 1.2em;">Get Results</h3>
            <p style="text-align:center; color:#e0e0e0; font-size:0.95em;">Press the equals (=) button to calculate your result. Your calculation will be saved in the history panel for future reference.</p>
        </div>
    </div>
</div>
<div class="features">
    <h2>Features</h2>
    <div class="feature-cards">
        <div class="feature-card">
            <h3>Basic Arithmetic</h3>
            <p>Perform addition, subtraction, multiplication, and division with ease. The calculator is designed for quick and accurate results.</p>
        </div>
        <div class="feature-card">
            <h3>Percentage & Sign</h3>
            <p>Calculate percentages and toggle between positive and negative values with dedicated buttons for convenience.</p>
        </div>
        <div class="feature-card">
            <h3>Scientific Functions</h3>
            <p>Perform advanced calculations like square root, sine, cosine, and tangent with the new scientific function buttons.</p>
        </div>
        <div class="feature-card">
            <h3>Memory Functions</h3>
            <p>Store, recall, add, and subtract values using the memory buttons for enhanced calculation capabilities.</p>
        </div>
        <div class="feature-card">
            <h3>Responsive Design</h3>
            <p>Use the calculator on any device—desktop, tablet, or mobile. The layout adapts for a seamless experience everywhere.</p>
        </div>
    </div>
</div>
<div class="faq">
    <h2>Frequently Asked Questions (FAQs)</h2>
    <div class="faq-item">
        <strong>1. What is this calculator used for?</strong>
        <p>This calculator is designed for basic arithmetic operations such as addition, subtraction, multiplication, and division. It is simple and easy to use for quick calculations.</p>
    </div>
    <div class="faq-item">
        <strong>2. Can I use this calculator on my mobile device?</strong>
        <p>Yes, this calculator is fully responsive and works seamlessly on mobile devices, tablets, and desktops.</p>
    </div>
    <div class="faq-item">
        <strong>3. Does this calculator support advanced functions?</strong>
        <p>Yes, the calculator now includes scientific functions like square root, sine, cosine, and tangent.</p>
    </div>
    <div class="faq-item">
        <strong>4. How accurate are the calculations?</strong>
        <p>The calculator provides results with up to 10 digits of precision, ensuring high accuracy for most calculations.</p>
    </div>
    <div class="faq-item">
        <strong>5. Can I use the keyboard to operate the calculator?</strong>
        <p>Yes, you can use your keyboard's number pad and basic arithmetic keys (+, -, *, /) to perform calculations.</p>
    </div>
    <div class="faq-item">
        <strong>6. Is there a way to clear the display?</strong>
        <p>Yes, you can use the "AC" button to clear all entries and reset the calculator.</p>
    </div>
    <div class="faq-item">
        <strong>7. How does the memory function work?</strong>
        <p>The memory buttons allow you to store (M+), recall (MR), clear (MC), and subtract (M-) values for enhanced calculations.</p>
    </div>
</div>
<!-- Support section is already included in the base template -->
{% endblock %}

{% block body_scripts %}
<script>
let memory = 0;
let history = [];

function appendToDisplay(value) {
    const display = document.getElementById('display');
    if (display.value === '0' || display.value === 'Error') display.value = '';
    display.value += value;
}
function clearDisplay() {
    document.getElementById('display').value = '';
}
function backspace() {
    const display = document.getElementById('display');
    display.value = display.value.slice(0, -1);
}
function toggleSign() {
    const display = document.getElementById('display');
    if (display.value) {
        if (display.value.startsWith('-')) display.value = display.value.slice(1);
        else display.value = '-' + display.value;
    }
}
function calculate() {
    const display = document.getElementById('display');
    let expression = display.value.replace(/÷/g, '/').replace(/×/g, '*');
    try {
        // Evaluate with Math context for scientific functions
        let result = Function('return ' + expression)();
        if (typeof result === 'number' && !isNaN(result)) {
            result = parseFloat(result.toPrecision(10));
            addToHistory(display.value + ' = ' + result);
            display.value = result;
        } else {
            display.value = 'Error';
        }
    } catch {
        display.value = 'Error';
    }
}
function addToHistory(entry) {
    history.unshift(entry);
    if (history.length > 10) history.pop();
    renderHistory();
}
function renderHistory() {
    const list = document.getElementById('history-list');
    list.innerHTML = '';
    history.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
    });
}
// Memory functions
function memoryClear() { memory = 0; }
function memoryRecall() {
    document.getElementById('display').value += memory;
}
function memoryAdd() {
    const val = parseFloat(document.getElementById('display').value);
    if (!isNaN(val)) memory += val;
}
function memorySubtract() {
    const val = parseFloat(document.getElementById('display').value);
    if (!isNaN(val)) memory -= val;
}
// Keyboard support
window.addEventListener('keydown', function(e) {
    const allowed = '0123456789/*-+.()';
    if (allowed.includes(e.key)) appendToDisplay(e.key);
    if (e.key === 'Enter') calculate();
    if (e.key === 'Backspace') backspace();
    if (e.key === 'Escape') clearDisplay();
});
</script>
{% endblock %}