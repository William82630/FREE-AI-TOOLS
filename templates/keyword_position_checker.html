{% extends "base.html" %}

{% block title %}Keyword Position Checker - Free AI Tools{% endblock %}
{% block description %}Check your website's keyword rankings in search engines. Monitor your SEO performance and track your position for important keywords.{% endblock %}
{% block keywords %}keyword position checker, keyword rank tracker, SERP position, SEO rank checker, keyword ranking tool{% endblock %}

{% block hero_color %}#004080{% endblock %}
{% block hero_title %}Keyword Position Checker{% endblock %}
{% block hero_subtitle %}Track your website's ranking position for important keywords in search engines{% endblock %}

{% block additional_styles %}
.result-section {
    display: none;
    margin-top: 30px;
}
.result-container {
    background: #23263a;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 30px;
}
.result-container h3 {
    color: #3d9bf2;
    margin-top: 0;
    margin-bottom: 20px;
    border-bottom: 1px solid #333;
    padding-bottom: 10px;
}
.result-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}
.result-table th, .result-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #333;
}
.result-table th {
    background-color: #2a2e45;
    color: #fff;
    font-weight: bold;
}
.result-table tr:hover {
    background-color: #2a2e45;
}
.position-cell {
    font-weight: bold;
    text-align: center;
}
.position-1 {
    color: #4CAF50;
}
.position-top10 {
    color: #8BC34A;
}
.position-top30 {
    color: #FFC107;
}
.position-top100 {
    color: #FF9800;
}
.position-other {
    color: #F44336;
}
.not-found {
    color: #9E9E9E;
    font-style: italic;
}
.trend-up {
    color: #4CAF50;
}
.trend-down {
    color: #F44336;
}
.trend-stable {
    color: #FFC107;
}
.input-group {
    margin-bottom: 15px;
}
.input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}
.input-group input, .input-group textarea {
    width: 100%;
    padding: 10px;
    border: 2px solid #3d9bf2;
    border-radius: 4px;
    background: #23263a;
    color: #fff;
    font-size: 16px;
}
.input-group textarea {
    height: 100px;
    resize: vertical;
}
.input-group select {
    padding: 10px;
    border: 2px solid #3d9bf2;
    border-radius: 4px;
    background: #23263a;
    color: #fff;
    font-size: 16px;
}
.input-group small {
    display: block;
    margin-top: 5px;
    color: #aaa;
    font-size: 0.85em;
}
.export-section {
    margin-top: 30px;
    text-align: center;
}
.export-button {
    display: inline-block;
    margin: 0 10px;
    padding: 10px 20px;
    background: #23263a;
    border: 1px solid #3d9bf2;
    border-radius: 4px;
    color: #3d9bf2;
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s;
}
.export-button:hover {
    background: #3d9bf2;
    color: #fff;
}
.summary-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 20px;
}
.stat-box {
    flex: 1;
    min-width: 150px;
    background: #2a2e45;
    border-radius: 8px;
    padding: 15px;
    text-align: center;
}
.stat-box h4 {
    margin: 0 0 10px 0;
    color: #3d9bf2;
    font-size: 1em;
}
.stat-box p {
    font-size: 1.8em;
    margin: 0;
    font-weight: bold;
}
@media (max-width: 768px) {
    .summary-stats {
        flex-direction: column;
    }
    .stat-box {
        min-width: 100%;
    }
    .result-table {
        display: block;
        overflow-x: auto;
    }
}
{% endblock %}

{% block content %}
<div class="input-section">
    <form id="positionForm">
        <div class="input-group">
            <label for="website">Your Website URL</label>
            <input type="url" id="website" name="website" placeholder="https://example.com" required>
            <small>Enter your full website URL including https://</small>
        </div>
        
        <div class="input-group">
            <label for="keywords">Keywords to Check</label>
            <textarea id="keywords" name="keywords" placeholder="Enter one keyword per line (max 10)" required></textarea>
            <small>Enter up to 10 keywords you want to check rankings for</small>
        </div>
        
        <div class="input-group">
            <label for="search_engine">Search Engine</label>
            <select id="search_engine" name="search_engine">
                <option value="google" selected>Google</option>
                <option value="bing">Bing</option>
                <option value="yahoo">Yahoo</option>
            </select>
        </div>
        
        <div class="input-group">
            <label for="location">Location</label>
            <select id="location" name="location">
                <option value="global" selected>Global</option>
                <option value="us">United States</option>
                <option value="uk">United Kingdom</option>
                <option value="ca">Canada</option>
                <option value="au">Australia</option>
                <option value="in">India</option>
            </select>
            <small>Select the location to check rankings for</small>
        </div>
        
        <button type="submit">Check Keyword Positions</button>
    </form>
</div>

<div id="results" class="result-section">
    <div class="result-container">
        <h3>Keyword Position Results for <span id="websiteDisplay"></span></h3>
        
        <div class="summary-stats">
            <div class="stat-box">
                <h4>Keywords Checked</h4>
                <p id="totalKeywords">0</p>
            </div>
            <div class="stat-box">
                <h4>Top 10 Rankings</h4>
                <p id="top10Count">0</p>
            </div>
            <div class="stat-box">
                <h4>Average Position</h4>
                <p id="avgPosition">0</p>
            </div>
            <div class="stat-box">
                <h4>Not Ranking</h4>
                <p id="notRankingCount">0</p>
            </div>
        </div>
        
        <table class="result-table" id="resultTable">
            <thead>
                <tr>
                    <th>Keyword</th>
                    <th>Position</th>
                    <th>URL Ranking</th>
                    <th>Search Volume</th>
                    <th>Trend</th>
                </tr>
            </thead>
            <tbody>
                <!-- Results will be inserted here -->
            </tbody>
        </table>
    </div>
    
    <div class="export-section">
        <a href="#" class="export-button" id="exportCSV">Export as CSV</a>
        <a href="#" class="export-button" id="refreshResults">Refresh Results</a>
    </div>
</div>

<div class="how-it-works">
    <h2>How to Use the Keyword Position Checker</h2>
    <div class="how-to-steps">
        <div class="step">
            <h3><span>1</span>Enter Your Website</h3>
            <p>Input your complete website URL, including the "https://" prefix. This is the domain you want to check keyword rankings for.</p>
        </div>
        <div class="step">
            <h3><span>2</span>Add Your Keywords</h3>
            <p>Enter the keywords you want to track, with one keyword per line. You can check up to 10 keywords at once with our free tool.</p>
        </div>
        <div class="step">
            <h3><span>3</span>Select Search Engine and Location</h3>
            <p>Choose which search engine and geographic location you want to check rankings for, as positions can vary across different search engines and regions.</p>
        </div>
        <div class="step">
            <h3><span>4</span>Analyze Your Results</h3>
            <p>Review your keyword positions, see which URLs are ranking, and export the data for your records or further analysis.</p>
        </div>
    </div>
</div>

<div class="features">
    <h2>Features of Our Keyword Position Checker</h2>
    <div class="feature-cards">
        <div class="feature-card">
            <h3>Multi-Keyword Tracking</h3>
            <p>Check rankings for multiple keywords at once to get a comprehensive view of your SEO performance.</p>
        </div>
        <div class="feature-card">
            <h3>Multiple Search Engines</h3>
            <p>Track your positions across different search engines including Google, Bing, and Yahoo.</p>
        </div>
        <div class="feature-card">
            <h3>Location-Specific Results</h3>
            <p>Get rankings for specific geographic locations to understand how your site performs in different markets.</p>
        </div>
        <div class="feature-card">
            <h3>Ranking URL Detection</h3>
            <p>See exactly which page from your website is ranking for each keyword to help optimize your content strategy.</p>
        </div>
        <div class="feature-card">
            <h3>Performance Summary</h3>
            <p>Get a quick overview of your SEO performance with statistics like average position and top 10 rankings.</p>
        </div>
        <div class="feature-card">
            <h3>Data Export</h3>
            <p>Export your ranking data as a CSV file for further analysis or to include in your SEO reports.</p>
        </div>
    </div>
</div>

<div class="faq">
    <h2>Frequently Asked Questions</h2>
    <div class="faq-item">
        <h3>How accurate is the keyword position checker?</h3>
        <p>Our tool provides a snapshot of your current rankings based on the selected search engine and location. While we strive for accuracy, search engine rankings can fluctuate throughout the day due to personalization, location, and algorithm updates. For the most consistent tracking, we recommend checking positions at regular intervals.</p>
    </div>
    <div class="faq-item">
        <h3>Why might my website not show up in the results?</h3>
        <p>If your website isn't found in the search results for a particular keyword, it could be because it's ranking beyond the top 100 results, the website is new and not yet indexed, or there might be technical issues preventing proper indexing. It's also possible that the search terms are highly competitive.</p>
    </div>
    <div class="faq-item">
        <h3>How often should I check my keyword positions?</h3>
        <p>For most websites, checking keyword positions once a week or once every two weeks is sufficient to track progress while accounting for normal ranking fluctuations. After making significant changes to your website or content, you might want to check more frequently to see the impact.</p>
    </div>
    <div class="faq-item">
        <h3>What does the trend column indicate?</h3>
        <p>The trend column shows how your ranking has changed compared to the previous check. An upward arrow indicates your position has improved (moved closer to #1), a downward arrow means your position has declined, and a horizontal arrow indicates no change in position.</p>
    </div>
    <div class="faq-item">
        <h3>Is there a limit to how many keywords I can check?</h3>
        <p>The free version of our tool allows you to check up to 10 keywords at once. This limit helps ensure fair usage of our resources and maintains performance for all users. If you need to track more keywords, consider checking them in batches or exploring our premium options.</p>
    </div>
</div>
{% endblock %}

{% block twitter_path %}/tools/keyword-research/keyword-position-checker{% endblock %}
{% block twitter_text %}Track+your+website's+keyword+rankings+with+this+free+tool!{% endblock %}
{% block facebook_path %}/tools/keyword-research/keyword-position-checker{% endblock %}
{% block linkedin_path %}/tools/keyword-research/keyword-position-checker{% endblock %}
{% block linkedin_title %}Free+Keyword+Position+Checker+Tool{% endblock %}
{% block linkedin_summary %}Monitor+your+SEO+performance+and+track+keyword+rankings{% endblock %}
{% block pinterest_path %}/tools/keyword-research/keyword-position-checker{% endblock %}
{% block pinterest_description %}Free+Keyword+Position+Checker+Tool{% endblock %}
{% block whatsapp_text %}Check+out+this+free+Keyword+Position+Checker+tool:+http://127.0.0.1:5000/tools/keyword-research/keyword-position-checker{% endblock %}

{% block body_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const positionForm = document.getElementById('positionForm');
    const resultsSection = document.getElementById('results');
    const resultTable = document.getElementById('resultTable').getElementsByTagName('tbody')[0];
    const websiteDisplay = document.getElementById('websiteDisplay');
    const exportCSV = document.getElementById('exportCSV');
    const refreshResults = document.getElementById('refreshResults');
    
    // Store results for export
    let rankingResults = [];
    
    // Handle form submission
    positionForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const website = document.getElementById('website').value.trim();
        const keywordsText = document.getElementById('keywords').value.trim();
        const searchEngine = document.getElementById('search_engine').value;
        const location = document.getElementById('location').value;
        
        // Validate inputs
        if (!website) {
            alert('Please enter your website URL.');
            return;
        }
        
        if (!keywordsText) {
            alert('Please enter at least one keyword to check.');
            return;
        }
        
        // Parse keywords
        const keywords = keywordsText.split('\n')
            .map(k => k.trim())
            .filter(k => k.length > 0);
        
        // Check keyword limit
        if (keywords.length > 10) {
            alert('You can check a maximum of 10 keywords at once with the free version.');
            return;
        }
        
        // Show loading state
        resultTable.innerHTML = '<tr><td colspan="5" style="text-align: center;">Checking keyword positions...</td></tr>';
        resultsSection.style.display = 'block';
        websiteDisplay.textContent = website;
        
        // In a real implementation, this would be an API call to your backend
        // For this demo, we'll simulate the API response with sample data
        setTimeout(() => {
            checkKeywordPositions(website, keywords, searchEngine, location);
        }, 2000);
    });
    
    // Handle export as CSV
    exportCSV.addEventListener('click', function(e) {
        e.preventDefault();
        
        if (rankingResults.length === 0) {
            alert('No results to export.');
            return;
        }
        
        // Create CSV content
        let csvContent = "data:text/csv;charset=utf-8,";
        csvContent += "Keyword,Position,URL Ranking,Search Volume,Trend\n";
        
        rankingResults.forEach(result => {
            let position = result.position;
            if (position === 'Not found') position = '101+';
            
            csvContent += `"${result.keyword}","${position}","${result.url}","${result.volume}","${result.trend}"\n`;
        });
        
        // Create download link
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "keyword_positions.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    });
    
    // Handle refresh results
    refreshResults.addEventListener('click', function(e) {
        e.preventDefault();
        positionForm.dispatchEvent(new Event('submit'));
    });
    
    // Function to check keyword positions
    function checkKeywordPositions(website, keywords, searchEngine, location) {
        // In a real implementation, this would call your backend API
        // For this demo, we'll generate sample data
        
        // Clear previous results
        rankingResults = [];
        resultTable.innerHTML = '';
        
        // Generate sample results for each keyword
        keywords.forEach(keyword => {
            // Generate a random position or "not found"
            const randomValue = Math.random();
            let position, positionClass, url, trend;
            
            if (randomValue < 0.1) {
                // 10% chance of not being found
                position = 'Not found';
                positionClass = 'not-found';
                url = 'N/A';
            } else {
                // 90% chance of having a position
                position = Math.floor(Math.random() * 100) + 1;
                
                if (position <= 3) {
                    positionClass = 'position-1';
                } else if (position <= 10) {
                    positionClass = 'position-top10';
                } else if (position <= 30) {
                    positionClass = 'position-top30';
                } else if (position <= 100) {
                    positionClass = 'position-top100';
                } else {
                    positionClass = 'position-other';
                }
                
                // Generate a random URL from the website
                const paths = ['', 'blog/', 'products/', 'services/', 'about/'];
                const randomPath = paths[Math.floor(Math.random() * paths.length)];
                url = website + (randomPath ? '/' + randomPath : '');
                
                // Clean up the URL
                if (url.endsWith('/')) {
                    url = url.slice(0, -1);
                }
            }
            
            // Generate a random search volume
            const volume = Math.floor(Math.random() * 10000) + 100;
            
            // Generate a random trend
            const trendRandom = Math.random();
            if (trendRandom < 0.33) {
                trend = 'up';
            } else if (trendRandom < 0.66) {
                trend = 'down';
            } else {
                trend = 'stable';
            }
            
            // Add to results array
            rankingResults.push({
                keyword: keyword,
                position: position,
                url: url,
                volume: volume,
                trend: trend
            });
            
            // Create table row
            const row = resultTable.insertRow();
            
            // Keyword cell
            const keywordCell = row.insertCell(0);
            keywordCell.textContent = keyword;
            
            // Position cell
            const positionCell = row.insertCell(1);
            positionCell.textContent = position;
            positionCell.className = `position-cell ${positionClass}`;
            
            // URL cell
            const urlCell = row.insertCell(2);
            if (url !== 'N/A') {
                const urlLink = document.createElement('a');
                urlLink.href = url;
                urlLink.textContent = url;
                urlLink.target = '_blank';
                urlCell.appendChild(urlLink);
            } else {
                urlCell.textContent = url;
            }
            
            // Search volume cell
            const volumeCell = row.insertCell(3);
            volumeCell.textContent = volume.toLocaleString();
            
            // Trend cell
            const trendCell = row.insertCell(4);
            let trendIcon;
            if (trend === 'up') {
                trendIcon = '↑';
                trendCell.className = 'trend-up';
            } else if (trend === 'down') {
                trendIcon = '↓';
                trendCell.className = 'trend-down';
            } else {
                trendIcon = '→';
                trendCell.className = 'trend-stable';
            }
            trendCell.textContent = trendIcon;
        });
        
        // Update summary statistics
        updateSummaryStats();
    }
    
    // Function to update summary statistics
    function updateSummaryStats() {
        const totalKeywords = rankingResults.length;
        document.getElementById('totalKeywords').textContent = totalKeywords;
        
        // Count top 10 rankings
        const top10Count = rankingResults.filter(result => 
            typeof result.position === 'number' && result.position <= 10
        ).length;
        document.getElementById('top10Count').textContent = top10Count;
        
        // Calculate average position
        const positionsArray = rankingResults
            .filter(result => typeof result.position === 'number')
            .map(result => result.position);
        
        let avgPosition = 0;
        if (positionsArray.length > 0) {
            avgPosition = positionsArray.reduce((sum, pos) => sum + pos, 0) / positionsArray.length;
            avgPosition = avgPosition.toFixed(1);
        }
        document.getElementById('avgPosition').textContent = avgPosition;
        
        // Count not ranking
        const notRankingCount = rankingResults.filter(result => 
            result.position === 'Not found'
        ).length;
        document.getElementById('notRankingCount').textContent = notRankingCount;
    }
});
</script>
{% endblock %}
